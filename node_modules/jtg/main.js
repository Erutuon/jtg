/*
 * Copyright (c) 2015 by Greg Reimer <gregreimer@gmail.com>
 * All Rights Reserved.
 */

// this is the entry point...

require('babel/polyfill') // needed to allow generators

var Turtle = require('jtg/models/turtle')
  , co = require('co')
  , fieldCanvas = document.querySelector('#field')
  , drawCanvas = document.querySelector('#draw')
  , turtleCanvas = document.querySelector('#turtle')

var t = window.t = new Turtle({
  fieldCanvas: fieldCanvas,
  drawCanvas: drawCanvas,
  turtleCanvas: turtleCanvas
})

co(function*(){
  var color = '#fff'
    , cover = 'rgba(0,0,0,0.025)'
    , n = 1
  t.pen.weight(2)
  while (n++ < 10) {
    for (var i=0; i<60; i++) {
      if (t.oob()) {
        yield t.pen.up()
        yield t.xy(0, 0)
        yield t.pen.down()
      }
      t.pen.color(color)
      yield t.fd(4)
      if (n % 2 === 0) {t.rt(6)}
      else {t.lt(6)}
      t.pen.color(cover)
      t.flood()
    }
  }
})

